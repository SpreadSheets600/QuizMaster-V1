{% extends 'base.html' %} {% block title %}Retake Quiz: {{ quiz.quiz_name }}{% endblock %} {% block content %}
<div class="container-fluid py-4">
	<div class="row">
		<div class="col-lg-8 mx-auto">
			<div class="card">
				<div class="card-header pb-0">
					<div class="d-flex justify-content-between align-items-center">
						<div>
							<h5>{{ quiz.quiz_name }}</h5>
							<p class="text-sm mb-0">
								<span class="font-weight-bold">You've already attempted this quiz</span>
							</p>
						</div>
						<a href="{{ url_for('user.subject_quizzes', subject_id=quiz.subject_id) }}" class="btn btn-outline-secondary btn-sm"> <i class="fas fa-arrow-left me-2"></i> Back to Quizzes </a>
					</div>
				</div>

				<div class="card-body">
					<div class="alert alert-info">
						<h6 class="alert-heading mb-3">Previous Attempt Information</h6>
						<p>You have already attempted this quiz on {{ previous_score.timestamp_of_attempt.strftime('%B %d, %Y at %H:%M') }}</p>

						<div class="row mt-4">
							<div class="col-md-6">
								<div class="card bg-gradient-primary">
									<div class="card-body p-3">
										<div class="d-flex align-items-center">
											<div class="icon icon-shape bg-white shadow text-center rounded-circle">
												<i class="fas fa-trophy text-primary"></i>
											</div>
											<div class="ms-3">
												<p class="text-sm mb-0 opacity-8">Your Score</p>
												<h4 class="mb-0">{{ previous_score.total_score }}</h4>
											</div>
										</div>
									</div>
								</div>
							</div>

							<div class="col-md-6">
								<div class="card bg-gradient-light">
									<div class="card-body p-3">
										<div class="row">
											<div class="col-4 text-center">
												<span class="badge bg-success p-2"> <i class="fas fa-check me-1"></i>{{ previous_score.correct_answers }} </span>
												<p class="text-xs mt-2 mb-0">Correct</p>
											</div>
											<div class="col-4 text-center">
												<span class="badge bg-danger p-2"> <i class="fas fa-times me-1"></i>{{ previous_score.wrong_answers }} </span>
												<p class="text-xs mt-2 mb-0">Wrong</p>
											</div>
											<div class="col-4 text-center">
												<span class="badge bg-warning p-2"> <i class="fas fa-minus me-1"></i>{{ previous_score.skipped }} </span>
												<p class="text-xs mt-2 mb-0">Skipped</p>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<div class="alert alert-warning mt-4">
						<h6 class="alert-heading">Want to improve your score?</h6>
						<p>You can review your previous answers or take the quiz again to try for a better score.</p>
						<p class="mb-0"><strong>Note:</strong> Each new attempt will be recorded separately in your quiz history.</p>
					</div>

					<div class="row mt-4">
						<div class="col-md-6">
							<div class="d-grid">
								<a href="{{ url_for('user.quiz_results', score_id=previous_score.id) }}" class="btn btn-lg bg-gradient-info"> <i class="fas fa-eye me-2"></i> Review Previous Attempt </a>
							</div>
						</div>
						<div class="col-md-6">
							<div class="d-grid">
								<a href="{{ url_for('user.quiz_take', quiz_id=quiz.id, retake=1) }}" class="btn btn-lg bg-gradient-success"> <i class="fas fa-redo-alt me-2"></i> Retake Quiz </a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %} {% block scripts %}
<script>
	document.addEventListener("DOMContentLoaded", function () {
		// Highlight the active link in sidebar
		const subjectLink = document.querySelector('a[href="{{ url_for("user.user_quizzes") }}"]');
		if (subjectLink) {
			subjectLink.classList.add("active");
		}
	});
</script>
{% endblock %}
